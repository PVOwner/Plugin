--Locals
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character
local Humanoid = Character:WaitForChild("Humanoid") 
local HumanoidRootPart = Character.HumanoidRootPart
local Workspace = game:GetService("Workspace")
local CurrentCamera = Workspace.CurrentCamera
local infiniteJumpEnabled = false
local pluginname = "SX"
local ver1 = "V.1"
local ver2 = "V.1.1"
local ver3 = "X.2"

--Tabs
delta:AddTab("Special Thank/Credits", "Thank you Delta Team for this function, and Made by Ember\nYT || EmberIsBack\nDiscord || ember260")
delta:AddTab("Info", "Plugin Called: " .. pluginname .. ", Current Version: " .. ver2 .. ", Old Version: " .. ver1 .. " And Next Version: " .. ver3 .. ".")
delta:AddTab("SX Welcome", "Thank you for using my plugin!")

--Settings Function
delta.Settings:AddInput("WalkSpeed", "Allows you to change speed", function(text)
    local speed = tonumber(text)
    if speed then
        Humanoid.WalkSpeed = speed
    end
end)

delta.Settings:AddInput("JumpPower", "Allows you to change power of your jump", function(text)
    local power = tonumber(text)
    if power then
        Humanoid.JumpPower = power
    end
end)

delta.Settings:AddInput("HipHeight", "Changes your HipHeight based on the number input.", function(text)
    local hipHeight = tonumber(text)
    if hipHeight then
        Humanoid.HipHeight = hipHeight
    end
end)

delta.Settings:AddInput("Gravity", "Allows you to change gravity power", function(text)
    local gravity = tonumber(text)
    if gravity then
        Workspace.Gravity = gravity
    end
end)

delta.Settings:AddSwitch("Infinite Jump", "Allows user to infinitely jump.", function(state)
    if state then
        infiniteJumpEnabled = true
        UserInputService.JumpRequest:Connect(function()
            if infiniteJumpEnabled then
                Humanoid:ChangeState("Jumping")
            end
        end)
    else
        infiniteJumpEnabled = false
    end
end)

-- You can still scrolling
delta.Settings:AddButton("Reset", "Kills your character", function()
    Humanoid.Health = 0
end)

delta.Settings:AddButton("Anti Afk", "Prevents You From Getting Kicked Due to Being AFK.", function()
    local OldNameCall = nil
    OldNameCall = hookmetamethod(game, "__namecall", function(...)
        local self, key = ...
        if self == Players.LocalPlayer and getcallingmethod() == "Idled" then
            return true
        end
        return OldNameCall(...)
    end)
end)

delta.Settings:AddButton("RTX", "Selected RTX", function()
    loadstring(game:HttpGet('https://raw.githubusercontent.com/GhostPlayer352/Test4/main/RTX%20Gui%20Hub%20Obfuscator'))()
end)

delta.Settings:AddButton("Changelog", "Allowed You To Knowing About Updated", function()
    loadstring(game:HttpGet("https://raw.githubusercontent.com/PVOwner/Plugin/main/Changelogver2.lua"))()
end)

delta.Settings:AddButton("Instant Prompt", "Bypasses ProximityPrompt cooldown.", function()
    game:GetService("ProximityPromptService").PromptButtonHoldBegan:Connect(function(prompt)
        fireproximityprompt(prompt)
    end)
end)

delta.Settings:AddInput("Hitbox", "Based On Input Number", function(text)
    _G.HeadSize = text
    _G.Disabled = true

    game:GetService('RunService').RenderStepped:connect(function()
        if _G.Disabled then
            for i,v in next, game:GetService('Players'):GetPlayers() do
                if v.Name ~= game:GetService('Players').LocalPlayer.Name then
                    pcall(function()
                        v.Character.HumanoidRootPart.Size = Vector3.new(_G.HeadSize, _G.HeadSize, _G.HeadSize)
                        v.Character.HumanoidRootPart.Transparency = 0.9
                        v.Character.HumanoidRootPart.BrickColor = BrickColor.new("Gray")
                        v.Character.HumanoidRootPart.Material = "Plastic"
                        v.Character.HumanoidRootPart.CanCollide = false
                    end)
                end
            end
        end
    end)
end)

delta.Settings:AddInput("Health", "Allowed User Changing Your HP", function(text)
    local health = tonumber(text)
    Humanoid.Health = health
end)

delta.Settings:AddInput("Max HP", "Allowed User Changing Your Max HP", function(text)
    local maxhealth = tonumber(text)
    Humanoid.MaxHealth = maxhealth
end)

delta.Settings:AddInput("FOV", "Allowed To Change Your Field Of View", function(text)
    local fov = tonumber(text)
    CurrentCamera.FieldOfView = fov
end)

delta.Settings:AddButton("Sit", "Change Your Humanoid To Sit", function()
    Humanoid.Sit = true
end)

delta.Settings:AddButton("Anti Fling", "Anti Flinging From Exploiter", function()
    HumanoidRootPart.Anchored = true
end)

-- Save Scripts
delta:SaveScript("Shadow X Executor", "loadstring(game:HttpGet('https://raw.githubusercontent.com/PVOwner/OwnerScript/main/ShadowXExecutor'))()", "Key")

delta:SaveScript("Nameless Admin", "loadstring(game:HttpGet('https://raw.githubusercontent.com/FilteringEnabled/NamelessAdmin/main/Source'))()", "Best")

delta:SaveScript("Dark Dex", "loadstring(game:HttpGet('https://pastebin.com/raw/J8AX35Fg'))()", "Best")

delta:SaveScript("Fly", "loadstring(game:HttpGet('https://raw.githubusercontent.com/XNEOFF/FlyGuiV3/main/FlyGuiV3.txt'))()", "V3")

delta:SaveScript("Dex Mobile", "getgenv().Key = 'Bash' loadstring(game:HttpGet('https://raw.githubusercontent.com/Hosvile/Refinement/main/MC%3AIY%20Dex', true))()", "Best")

delta:SaveScript("Walk On Wall", "loadstring(game:HttpGet('https://pastebin.com/raw/zXk4Rq2r'))()", "Best")

delta:SaveScript("Script Searcher", "loadstring(game:HttpGet('https://raw.githubusercontent.com/AZYsGithub/chillz-workshop/main/ScriptSearcher'))()", "Yes")

delta:SaveScript("Remote Spy/Simple Spy", "loadstring(game:HttpGet('https://raw.githubusercontent.com/78n/SimpleSpy/main/SimpleSpySource.lua'))()", "Best")

delta:SaveScript("Calculator By Ember", "loadstring(game:HttpGet('https://raw.githubusercontent.com/PVOwner/RandomScript/main/Calculator.lua'))()", "Best")

-- End of the plugin script


--Anti Kick And Webhooked

local mt = getrawmetatable(game) or getmetatable(game)
local __oldnamecall = mt.__namecall

mt.__namecall = newcclosure(function(self, ...)
	local args = {...}
	local namecallmethod = getnamecallmethod()

	if self == game:GetService("Players").LocalPlayer and string.lower(namecallmethod) == "kick" then
		warn("Something tried to kick you!")
		return nil
	end

	return __oldnamecall(self, unpack(args))
end)

setreadonly(mt, true)

local oldRequest = game.HttpGet
local hookfunction = hookfunction or function(f, hook)
    local env = getfenv(f)
    local key = newcclosure(function(...)
        local a = {...}
        if a[1].Url and (a[1].Url:find("discord") or a[1].Url:find("webhook")) then
            warn("Something tried to send a suspicious HTTP request: " .. tostring(a[1].Url))
            return
        end
        return hook(...)
    end)
    setfenv(key, env)
    return key
end

game.HttpGet = hookfunction(oldRequest, function(...)
    local args = {...}
    return oldRequest(unpack(args))
end)
